<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title></title>
    </head>
    <body>
      <button>按钮1</button>
      <button>按钮2</button>
      <button>按钮3</button>
      <button>按钮4</button>
      <button>按钮5</button>
        <script>
          /*
            ES5之前因为if和for都没有块级作用域的概念
            所以在很多时候
            我们都必须借助于function的作用域来解决
            应用外面变量的问题         
          */
        
           //1.没有块级作用域引发的问题:if的块级
           var func;
           if(true){
             var name = "litter";
             func = function(){
               console.log(name);
             }
           }

           name="bai";
           func();
           //  bai
           //变量name被改变

           //2.没有块级作用域引发的问题:for的块级
          //  var btns = document.getElementsByTagName('button');
          //  for(var i = 0;i<btns.length;i++){
          //   //事件绑定（异步函数）同步执行完之后才会执行异步 
          //   btns[i].addEventListener('click',function(){//相当于func在外部调用，而i已经为5
          //      console.log('第'+(i+1)+'个按钮被点击');
          //    })
          //  }
           //不论点击哪个按钮都会打印：第5个按钮被点击 


           //闭包解决这个问题（函数有块级作用域）
          //  for(var i = 0;i<btns.length;i++){
          //   (function(num){
          //     btns[i].addEventListener('click',function(){//相当于func在外部调用，而i已经为5
          //      console.log('第'+(num+1)+'个按钮被点击');
          //    })
          //   })(i)//将i作为参数传入
          //  }

           const btns = document.getElementsByTagName('button');
           for(let i = 0;i<btns.length;i++){
            //事件绑定（异步函数）同步执行完之后才会执行异步 
            btns[i].addEventListener('click',function(){//相当于func在外部调用，而i已经为5
               console.log('第'+(i+1)+'个按钮被点击');
             })
           }
        </script>
    </body>

</html>



